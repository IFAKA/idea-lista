/* shadcn/ui Design System - For Content Scripts */
:root {
    /* shadcn/ui Color System */
    --background: 0 0% 100%;
    --foreground: 0 0% 3.9%;
    --card: 0 0% 100%;
    --card-foreground: 0 0% 3.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 3.9%;
    --primary: 0 0% 9%;
    --primary-foreground: 0 0% 98%;
    --secondary: 0 0% 96.1%;
    --secondary-foreground: 0 0% 9%;
    --muted: 0 0% 96.1%;
    --muted-foreground: 0 0% 45.1%;
    --accent: 0 0% 96.1%;
    --accent-foreground: 0 0% 9%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 89.8%;
    --input: 0 0% 89.8%;
    --ring: 0 0% 3.9%;
    --radius: 0.5rem;
    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;

    /* Apple System Colors - Official Palette (Legacy) */
    --color-primary: #007AFF;           /* Apple Blue */
    --color-secondary: #5856D6;         /* Apple Purple */
    --color-success: #34C759;           /* Apple Green */
    --color-warning: #FF9500;           /* Apple Orange */
    --color-danger: #FF3B30;            /* Apple Red */
    --color-info: #5AC8FA;              /* Apple Light Blue */
    --color-yellow: #FFCC02;            /* Apple Yellow */
    --color-pink: #FF2D92;              /* Apple Pink */
    --color-teal: #64D2FF;              /* Apple Teal */
    --color-indigo: #AF52DE;            /* Apple Indigo */
    
    /* Apple System Grays - Dark Mode */
    --color-gray-1: #8E8E93;            /* System Gray */
    --color-gray-2: #636366;            /* System Gray 2 */
    --color-gray-3: #48484A;            /* System Gray 3 */
    --color-gray-4: #3A3A3C;            /* System Gray 4 */
    --color-gray-5: #2C2C2E;            /* System Gray 5 */
    --color-gray-6: #1C1C1E;            /* System Gray 6 */
    
    /* Apple System Backgrounds - Dark Mode */
    --bg-primary: #000000;              /* Pure Black */
    --bg-secondary: #1C1C1E;            /* System Gray 6 */
    --bg-tertiary: #2C2C2E;             /* System Gray 5 */
    --bg-elevated: #3A3A3C;             /* System Gray 4 */
    --bg-quaternary: #48484A;           /* System Gray 3 */
    
    /* Apple System Text - Dark Mode */
    --text-primary: #FFFFFF;            /* White */
    --text-secondary: #EBEBF5;          /* System Gray */
    --text-tertiary: #EBEBF599;         /* System Gray (60% opacity) */
    --text-quaternary: #EBEBF54D;       /* System Gray (30% opacity) */
    --text-inverse: #000000;            /* Black */
    --text-link: var(--color-primary);
    
    /* Apple System Borders - Dark Mode */
    --border-light: #38383A;            /* System Gray 4 */
    --border-medium: #48484A;           /* System Gray 3 */
    --border-dark: #636366;             /* System Gray 2 */
    
    /* Apple System Shadows - Dark Mode */
    --shadow-xs: 0 1px 3px rgba(0, 0, 0, 0.4);
    --shadow-sm: 0 2px 6px rgba(0, 0, 0, 0.4);
    --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.4);
    --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.4);
    --shadow-xl: 0 16px 48px rgba(0, 0, 0, 0.4);
    
    /* Typography Scale */
    --font-size-xs: 11px;
    --font-size-sm: 12px;
    --font-size-base: 14px;
    --font-size-lg: 16px;
    --font-size-xl: 18px;
    --font-size-2xl: 20px;
    --font-size-3xl: 24px;
    
    /* Font Weights */
    --font-weight-light: 300;
    --font-weight-normal: 400;
    --font-weight-medium: 500;
    --font-weight-semibold: 600;
    --font-weight-bold: 700;
    
    /* Spacing Scale */
    --space-1: 4px;
    --space-2: 8px;
    --space-3: 12px;
    --space-4: 16px;
    --space-5: 20px;
    --space-6: 24px;
    --space-8: 32px;
    --space-10: 40px;
    --space-12: 48px;
    
    /* Border Radius */
    --radius-xs: 4px;
    --radius-sm: 6px;
    --radius-md: 8px;
    --radius-lg: 12px;
    --radius-xl: 16px;
    --radius-2xl: 20px;
    --radius-full: 9999px;
    
    /* Fast Animations - Apple Watch Style */
    --animation-fast: 100ms;
    --animation-quick: 150ms;
    --animation-open: 180ms;
    --animation-close: 200ms;
    --animation-standard: 300ms;
    
    /* Natural Motion - Apple Watch Easing */
    --easing-spring: cubic-bezier(0.25, 0.46, 0.45, 0.94);
    --easing-ease-out: cubic-bezier(0.0, 0.0, 0.2, 1);
    --easing-ease-in: cubic-bezier(0.4, 0.0, 1, 1);
    --easing-ease-in-out: cubic-bezier(0.4, 0.0, 0.2, 1);
    
    /* Hardware Accelerated Properties */
    --transform-base: translateZ(0);
    --backface-visibility: hidden;
}

/* Dark mode support for content scripts */
@media (prefers-color-scheme: dark) {
    :root {
        --background: 0 0% 3.9%;
        --foreground: 0 0% 98%;
        --card: 0 0% 3.9%;
        --card-foreground: 0 0% 98%;
        --popover: 0 0% 3.9%;
        --popover-foreground: 0 0% 98%;
        --primary: 0 0% 98%;
        --primary-foreground: 0 0% 9%;
        --secondary: 0 0% 14.9%;
        --secondary-foreground: 0 0% 98%;
        --muted: 0 0% 14.9%;
        --muted-foreground: 0 0% 63.9%;
        --accent: 0 0% 14.9%;
        --accent-foreground: 0 0% 98%;
        --destructive: 0 62.8% 30.6%;
        --destructive-foreground: 0 0% 98%;
        --border: 0 0% 14.9%;
        --input: 0 0% 14.9%;
        --ring: 0 0% 83.1%;
        --chart-1: 220 70% 50%;
        --chart-2: 160 60% 45%;
        --chart-3: 30 80% 55%;
        --chart-4: 280 65% 60%;
        --chart-5: 340 75% 55%;
    }
}

/* Respect reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
    * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}

/* Apple Watch Cursor Rules - Must Follow */
* {
    cursor: default;
}

/* Interactive Elements - Apple Watch Style */
button, 
.btn,
[role="button"],
.clickable,
.interactive,
a,
input[type="submit"],
input[type="button"],
input[type="reset"],
select,
textarea,
[tabindex]:not([tabindex="-1"]) {
    cursor: pointer;
}

/* Disabled States - Apple Watch Style */
button:disabled,
.btn:disabled,
[disabled],
.disabled,
[style*="opacity: 0.5"] {
    cursor: not-allowed !important;
}

/* Text Selection - Apple Watch Style */
input[type="text"],
input[type="email"],
input[type="password"],
input[type="number"],
input[type="search"],
input[type="url"],
input[type="tel"],
textarea,
[contenteditable="true"],
.selectable-text {
    cursor: text;
}

/* Resize Handles - Apple Watch Style */
textarea,
.resizable {
    cursor: auto;
}

/* Drag Elements - Apple Watch Style */
[draggable="true"],
.draggable {
    cursor: grab;
}

[draggable="true"]:active,
.draggable:active {
    cursor: grabbing;
}

/* Loading States - Apple Watch Style */
.loading,
[aria-busy="true"],
.processing {
    cursor: wait;
}

/* Help Elements - Apple Watch Style */
[title],
[data-tooltip],
.help {
    cursor: help;
}

/* Apple Watch UI Guidelines */
/* Typography */
body {
    font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'SF Pro Text', 'Helvetica Neue', Helvetica, Arial, sans-serif;
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-normal);
    line-height: 1.5;
    color: var(--text-primary);
    background-color: var(--bg-primary);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* Idea-lista Styles */

#idea-lista-analyzer-table {
    margin: 8px 0;
    padding: 12px 16px;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
    max-width: 100%;
    background: hsl(var(--card));
    border: 1px solid hsl(var(--border));
    color: hsl(var(--card-foreground));
}



/* One-line compact row */
.analyzer-row {
    display: flex;
    align-items: center;
    gap: 8px;
}

.analyzer-inline {
    display: flex;
    align-items: center;
    gap: 4px;
    flex-wrap: wrap;
    flex: 1 1 auto;
}

/* Chips - shadcn/ui Style */
.chip {
    display: inline-flex;
    align-items: center;
    line-height: 1;
    padding: 4px 8px;
    border-radius: 6px;
    font-size: 12px;
    font-weight: 600;
    color: hsl(var(--foreground));
    background: hsl(var(--muted));
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    border: 1px solid hsl(var(--border));
    transition: all 150ms cubic-bezier(0.25, 0.46, 0.45, 0.94);
    transform: translateZ(0);
    backface-visibility: hidden;
    will-change: transform, box-shadow;
}

.chip:hover {
    transform: translateZ(0) scale(1.02);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.chip.price { 
    color: hsl(var(--primary)); 
    background: hsl(var(--primary) / 0.1); 
    border-color: hsl(var(--primary) / 0.2);
}
.chip.size, .chip.rooms, .chip.bathrooms, .chip.floor { 
    background: hsl(var(--secondary)); 
    color: hsl(var(--secondary-foreground));
}
.chip.heating { 
    color: hsl(142 76% 36%); 
    background: hsl(142 76% 36% / 0.1); 
    border-color: hsl(142 76% 36% / 0.2);
}
.chip.furnished { 
    color: hsl(38 92% 50%); 
    background: hsl(38 92% 50% / 0.1); 
    border-color: hsl(38 92% 50% / 0.2);
}
.chip.elevator { 
    color: hsl(199 89% 48%); 
    background: hsl(199 89% 48% / 0.1); 
    border-color: hsl(199 89% 48% / 0.2);
}
.chip.seasonal { 
    color: hsl(262 83% 58%); 
    background: hsl(262 83% 58% / 0.1); 
    border-color: hsl(262 83% 58% / 0.2);
}
.chip.orientation { 
    color: hsl(var(--muted-foreground)); 
    background: hsl(var(--muted)); 
    border-color: hsl(var(--border));
}
.chip.pro { 
    color: hsl(var(--muted-foreground)); 
    background: hsl(var(--muted)); 
    border-color: hsl(var(--border));
}

.chip.price-m2 { 
    color: hsl(var(--primary)); 
    background: hsl(var(--primary) / 0.1); 
    border-color: hsl(var(--primary) / 0.2);
}
.chip.deposit { 
    color: hsl(142 76% 36%); 
    background: hsl(142 76% 36% / 0.1); 
    border-color: hsl(142 76% 36% / 0.2);
}
.chip.energy { 
    color: hsl(38 92% 50%); 
    background: hsl(38 92% 50% / 0.1); 
    border-color: hsl(38 92% 50% / 0.2);
}
.chip.desk { 
    color: hsl(199 89% 48%); 
    background: hsl(199 89% 48% / 0.1); 
    border-color: hsl(199 89% 48% / 0.2);
}

/* Additional amenities */
.chip.parking { 
    color: hsl(142 76% 36%); 
    background: hsl(142 76% 36% / 0.1); 
    border-color: hsl(142 76% 36% / 0.2);
}
.chip.terrace { 
    color: hsl(38 92% 50%); 
    background: hsl(38 92% 50% / 0.1); 
    border-color: hsl(38 92% 50% / 0.2);
}
.chip.balcony { 
    color: hsl(38 92% 50%); 
    background: hsl(38 92% 50% / 0.1); 
    border-color: hsl(38 92% 50% / 0.2);
}
.chip.air-conditioning { 
    color: hsl(199 89% 48%); 
    background: hsl(199 89% 48% / 0.1); 
    border-color: hsl(199 89% 48% / 0.2);
}
.chip.garden { 
    color: hsl(142 76% 36%); 
    background: hsl(142 76% 36% / 0.1); 
    border-color: hsl(142 76% 36% / 0.2);
}
.chip.pool { 
    color: hsl(199 89% 48%); 
    background: hsl(199 89% 48% / 0.1); 
    border-color: hsl(199 89% 48% / 0.2);
}
.chip.accessible { 
    color: hsl(142 76% 36%); 
    background: hsl(142 76% 36% / 0.1); 
    border-color: hsl(142 76% 36% / 0.2);
}
.chip.cleaning { 
    color: hsl(142 76% 36%); 
    background: hsl(142 76% 36% / 0.1); 
    border-color: hsl(142 76% 36% / 0.2);
}
.chip.lgbt { 
    color: hsl(var(--primary)); 
    background: hsl(var(--primary) / 0.1); 
    border-color: hsl(var(--primary) / 0.2);
}
.chip.owner-absent { 
    color: hsl(38 92% 50%); 
    background: hsl(38 92% 50% / 0.1); 
    border-color: hsl(38 92% 50% / 0.2);
}
.chip.private-bathroom { 
    color: hsl(142 76% 36%); 
    background: hsl(142 76% 36% / 0.1); 
    border-color: hsl(142 76% 36% / 0.2);
}
.chip.window { 
    color: hsl(199 89% 48%); 
    background: hsl(199 89% 48% / 0.1); 
    border-color: hsl(199 89% 48% / 0.2);
}
.chip.couples { 
    color: hsl(142 76% 36%); 
    background: hsl(142 76% 36% / 0.1); 
    border-color: hsl(142 76% 36% / 0.2);
}
.chip.minors { 
    color: hsl(142 76% 36%); 
    background: hsl(142 76% 36% / 0.1); 
    border-color: hsl(142 76% 36% / 0.2);
}
.chip.wardrobes { 
    color: hsl(199 89% 48%); 
    background: hsl(199 89% 48% / 0.1); 
    border-color: hsl(199 89% 48% / 0.2);
}
.chip.garage { 
    color: hsl(142 76% 36%); 
    background: hsl(142 76% 36% / 0.1); 
    border-color: hsl(142 76% 36% / 0.2);
}
.chip.storage { 
    color: hsl(199 89% 48%); 
    background: hsl(199 89% 48% / 0.1); 
    border-color: hsl(199 89% 48% / 0.2);
}
.chip.floor-plan { 
    color: hsl(199 89% 48%); 
    background: hsl(199 89% 48% / 0.1); 
    border-color: hsl(199 89% 48% / 0.2);
}
.chip.virtual-tour { 
    color: hsl(var(--primary)); 
    background: hsl(var(--primary) / 0.1); 
    border-color: hsl(var(--primary) / 0.2);
}
.chip.bank { 
    color: hsl(38 92% 50%); 
    background: hsl(38 92% 50% / 0.1); 
    border-color: hsl(38 92% 50% / 0.2);
}
.chip.smokers { 
    color: hsl(38 92% 50%); 
    background: hsl(38 92% 50% / 0.1); 
    border-color: hsl(38 92% 50% / 0.2);
}
.chip.bed { 
    color: hsl(142 76% 36%); 
    background: hsl(142 76% 36% / 0.1); 
    border-color: hsl(142 76% 36% / 0.2);
}
.chip.roommates { 
    color: hsl(199 89% 48%); 
    background: hsl(199 89% 48% / 0.1); 
    border-color: hsl(199 89% 48% / 0.2);
}

/* Property type and condition */
.chip.property-type { 
    color: hsl(var(--primary)); 
    background: hsl(var(--primary) / 0.1); 
    border-color: hsl(var(--primary) / 0.2);
}
.chip.condition { 
    color: hsl(38 92% 50%); 
    background: hsl(38 92% 50% / 0.1); 
    border-color: hsl(38 92% 50% / 0.2);
}
.chip.gender { 
    color: hsl(var(--primary)); 
    background: hsl(var(--primary) / 0.1); 
    border-color: hsl(var(--primary) / 0.2);
}
.chip.maintenance { 
    color: hsl(38 92% 50%); 
    background: hsl(38 92% 50% / 0.1); 
    border-color: hsl(38 92% 50% / 0.2);
}

.chip.id, .chip.muted { 
    color: hsl(var(--muted-foreground)); 
    background: hsl(var(--muted)); 
    font-weight: 500;
    border-color: hsl(var(--border));
}

/* AI Prompt button */
.analyzer-ai-prompt-btn--compact {
    background-color: hsl(262 83% 58%);
    color: hsl(0 0% 98%);
    border: none;
    padding: 4px 8px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 12px;
    font-weight: 600;
    transition: all 150ms cubic-bezier(0.25, 0.46, 0.45, 0.94);
    align-self: center;
    white-space: nowrap;
    transform: translateZ(0);
    backface-visibility: hidden;
    will-change: transform, background-color;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 32px;
    height: 32px;
}

.analyzer-ai-prompt-btn--compact svg {
    margin-right: 0;
    flex-shrink: 0;
    cursor: pointer;
    pointer-events: none; /* Prevent SVG from interfering with button clicks */
}

.analyzer-ai-prompt-btn--compact:hover { 
    background-color: hsl(262 83% 50%); 
    transform: translateZ(0) scale(1.02);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.analyzer-ai-prompt-btn--compact:active {
    transform: translateZ(0) scale(0.98);
    transition: all 100ms cubic-bezier(0.4, 0.0, 1, 1);
}

/* Apple Watch Particle Animation System for Content Script */
.particle-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 9999;
    overflow: hidden;
}

.particle {
    position: absolute;
    width: 4px;
    height: 4px;
    background: var(--color-primary);
    border-radius: 50%;
    pointer-events: none;
    transform: var(--transform-base);
    backface-visibility: var(--backface-visibility);
    will-change: transform, opacity;
    box-shadow: 0 0 3px rgba(0, 122, 255, 0.8);
}

.particle:nth-child(odd) {
    background: var(--color-secondary);
    box-shadow: 0 0 3px rgba(88, 86, 214, 0.8);
}

.particle:nth-child(3n) {
    background: var(--color-success);
    box-shadow: 0 0 3px rgba(52, 199, 89, 0.8);
}

.particle:nth-child(4n) {
    background: var(--color-info);
    box-shadow: 0 0 3px rgba(90, 200, 250, 0.8);
}

.particle:nth-child(5n) {
    background: var(--color-warning);
    box-shadow: 0 0 3px rgba(255, 149, 0, 0.8);
}

.particle:nth-child(6n) {
    background: var(--color-pink);
    box-shadow: 0 0 3px rgba(255, 45, 146, 0.8);
}

.particle:nth-child(7n) {
    background: var(--color-teal);
    box-shadow: 0 0 3px rgba(100, 210, 255, 0.8);
}

/* Enhanced particle animations with compliant bezier curves */
@keyframes particleFloat1 {
    0% {
        opacity: 1;
        transform: var(--transform-base) scale(0) translateY(0) translateX(0);
    }
    15% {
        opacity: 1;
        transform: var(--transform-base) scale(1.1) translateY(-8px) translateX(3px);
    }
    35% {
        opacity: 0.9;
        transform: var(--transform-base) scale(1) translateY(-18px) translateX(6px);
    }
    55% {
        opacity: 0.7;
        transform: var(--transform-base) scale(0.8) translateY(-28px) translateX(-2px);
    }
    75% {
        opacity: 0.4;
        transform: var(--transform-base) scale(0.5) translateY(-40px) translateX(8px);
    }
    100% {
        opacity: 0;
        transform: var(--transform-base) scale(0.2) translateY(-55px) translateX(12px);
    }
}

@keyframes particleFloat2 {
    0% {
        opacity: 1;
        transform: var(--transform-base) scale(0) translateY(0) translateX(0);
    }
    20% {
        opacity: 1;
        transform: var(--transform-base) scale(1.05) translateY(-6px) translateX(-2px);
    }
    40% {
        opacity: 0.9;
        transform: var(--transform-base) scale(1) translateY(-15px) translateX(4px);
    }
    60% {
        opacity: 0.7;
        transform: var(--transform-base) scale(0.8) translateY(-25px) translateX(-6px);
    }
    80% {
        opacity: 0.4;
        transform: var(--transform-base) scale(0.5) translateY(-35px) translateX(5px);
    }
    100% {
        opacity: 0;
        transform: var(--transform-base) scale(0.2) translateY(-45px) translateX(-8px);
    }
}

@keyframes particleFloat3 {
    0% {
        opacity: 1;
        transform: var(--transform-base) scale(0) translateY(0) translateX(0);
    }
    25% {
        opacity: 1;
        transform: var(--transform-base) scale(1.15) translateY(-4px) translateX(2px);
    }
    45% {
        opacity: 0.9;
        transform: var(--transform-base) scale(1) translateY(-12px) translateX(-3px);
    }
    65% {
        opacity: 0.7;
        transform: var(--transform-base) scale(0.8) translateY(-20px) translateX(6px);
    }
    85% {
        opacity: 0.4;
        transform: var(--transform-base) scale(0.5) translateY(-30px) translateX(-4px);
    }
    100% {
        opacity: 0;
        transform: var(--transform-base) scale(0.2) translateY(-40px) translateX(8px);
    }
}

@keyframes particleFloat4 {
    0% {
        opacity: 1;
        transform: var(--transform-base) scale(0) translateY(0) translateX(0);
    }
    18% {
        opacity: 1;
        transform: var(--transform-base) scale(1.08) translateY(-5px) translateX(-1px);
    }
    38% {
        opacity: 0.9;
        transform: var(--transform-base) scale(1) translateY(-14px) translateX(3px);
    }
    58% {
        opacity: 0.7;
        transform: var(--transform-base) scale(0.8) translateY(-22px) translateX(-4px);
    }
    78% {
        opacity: 0.4;
        transform: var(--transform-base) scale(0.5) translateY(-32px) translateX(5px);
    }
    100% {
        opacity: 0;
        transform: var(--transform-base) scale(0.2) translateY(-42px) translateX(-6px);
    }
}

@keyframes particleFloat5 {
    0% {
        opacity: 1;
        transform: var(--transform-base) scale(0) translateY(0) translateX(0);
    }
    22% {
        opacity: 1;
        transform: var(--transform-base) scale(1.12) translateY(-3px) translateX(2px);
    }
    42% {
        opacity: 0.9;
        transform: var(--transform-base) scale(1) translateY(-10px) translateX(-2px);
    }
    62% {
        opacity: 0.7;
        transform: var(--transform-base) scale(0.8) translateY(-18px) translateX(4px);
    }
    82% {
        opacity: 0.4;
        transform: var(--transform-base) scale(0.5) translateY(-26px) translateX(-3px);
    }
    100% {
        opacity: 0;
        transform: var(--transform-base) scale(0.2) translateY(-35px) translateX(6px);
    }
}

/* Particle burst effect for button click */
.particle-burst {
    position: relative;
    overflow: visible;
}

.particle-burst::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    background: radial-gradient(circle, var(--color-primary) 0%, transparent 70%);
    border-radius: 50%;
    transform: var(--transform-base) translate(-50%, -50%);
    opacity: 0;
    pointer-events: none;
    z-index: -1;
    animation: burstExpand var(--animation-quick) var(--easing-spring) forwards;
}

@keyframes burstExpand {
    0% {
        width: 0;
        height: 0;
        opacity: 0.8;
    }
    100% {
        width: 60px;
        height: 60px;
        opacity: 0;
    }
}

/* Respect reduced motion preferences for particles */
@media (prefers-reduced-motion: reduce) {
    .particle {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transform: var(--transform-base) scale(0) !important;
        opacity: 0 !important;
    }
    
    .particle-burst::before {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
    }
}

/* Add button */
.analyzer-add-btn--compact {
    background-color: hsl(var(--primary));
    color: hsl(var(--primary-foreground));
    border: none;
    padding: 4px 8px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 12px;
    font-weight: 600;
    transition: all 150ms cubic-bezier(0.25, 0.46, 0.45, 0.94);
    align-self: center;
    white-space: nowrap;
    transform: translateZ(0);
    backface-visibility: hidden;
    will-change: transform, background-color;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

.analyzer-add-btn--compact svg {
    margin-right: 0;
    flex-shrink: 0;
    cursor: pointer;
    pointer-events: none; /* Prevent SVG from interfering with button clicks */
}

/* Icon-only button styles for content script */
.analyzer-add-btn--compact {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 32px;
    height: 32px;
    padding: var(--space-1) var(--space-2);
    border-radius: var(--radius-sm);
    cursor: pointer;
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-semibold);
    transition: all var(--animation-quick) var(--easing-spring);
    align-self: center;
    white-space: nowrap;
    transform: var(--transform-base);
    backface-visibility: var(--backface-visibility);
    will-change: transform, background-color;
    box-shadow: var(--shadow-sm);
}

.analyzer-add-btn--compact:hover { 
    background-color: hsl(var(--primary) / 0.9); 
    transform: translateZ(0) scale(1.02);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.analyzer-add-btn--compact:active {
    transform: var(--transform-base) scale(0.98);
    transition: all var(--animation-fast) var(--easing-ease-in);
}

.analyzer-add-btn--compact:active {
    transform: var(--transform-base) scale(0.98);
    transition: all var(--animation-fast) var(--easing-ease-in);
}
.analyzer-add-btn--compact:disabled { 
    background-color: var(--color-success); 
    cursor: not-allowed; 
    opacity: 1; 
}

/* Specific styles for added state */
.analyzer-add-btn--compact[disabled] {
    background-color: var(--color-success) !important;
    color: var(--text-inverse) !important;
    opacity: 1 !important;
    cursor: not-allowed !important;
}

/* Delete button hover state */
.analyzer-add-btn--compact.delete-mode:hover {
    background-color: #c82333 !important;
    transform: var(--transform-base) scale(1.02);
    box-shadow: var(--shadow-md);
}

/* Delete button active state */
.analyzer-add-btn--compact.delete-mode:active {
    background-color: #bd2130 !important;
    transform: var(--transform-base) scale(0.98);
}

/* Responsive */
@media (max-width: 768px) {
  #property-analyzer-table { padding: 6px 8px; }
  .chip { font-size: 11px; padding: 5px 7px; }
}

@media (max-width: 480px) {
  .chip { font-size: 10px; padding: 4px 6px; }
      .analyzer-add-btn--compact { padding: 5px 8px; font-size: 11px; }
}

<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font-family: Arial, sans-serif; font-size: 24px; font-weight: bold; fill: #2c3e50; }
      .subtitle { font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; fill: #34495e; }
      .label { font-family: Arial, sans-serif; font-size: 12px; fill: #2c3e50; }
      .component { fill: #3498db; stroke: #2980b9; stroke-width: 2; }
      .data { fill: #e74c3c; stroke: #c0392b; stroke-width: 2; }
      .ui { fill: #27ae60; stroke: #229954; stroke-width: 2; }
      .arrow { stroke: #7f8c8d; stroke-width: 3; fill: none; marker-end: url(#arrowhead); }
      .flow { stroke: #f39c12; stroke-width: 2; fill: none; stroke-dasharray: 5,5; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#7f8c8d" />
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="800" height="600" fill="#ecf0f1"/>
  
  <!-- Title -->
  <text x="400" y="30" text-anchor="middle" class="title">Idealista Property Manager Architecture</text>
  
  <!-- Browser Layer -->
  <rect x="50" y="60" width="700" height="80" fill="#bdc3c7" stroke="#95a5a6" stroke-width="2" rx="10"/>
  <text x="400" y="85" text-anchor="middle" class="subtitle">Browser Environment</text>
  
  <!-- Content Script -->
  <rect x="80" y="100" width="120" height="30" class="component" rx="5"/>
  <text x="140" y="120" text-anchor="middle" class="label">Content Script</text>
  
  <!-- Background Script -->
  <rect x="220" y="100" width="120" height="30" class="component" rx="5"/>
  <text x="280" y="120" text-anchor="middle" class="label">Background Script</text>
  
  <!-- Popup -->
  <rect x="360" y="100" width="120" height="30" class="ui" rx="5"/>
  <text x="420" y="120" text-anchor="middle" class="label">Popup UI</text>
  
  <!-- Storage -->
  <rect x="500" y="100" width="120" height="30" class="data" rx="5"/>
  <text x="560" y="120" text-anchor="middle" class="label">Chrome Storage</text>
  
  <!-- Idealista Website -->
  <rect x="640" y="100" width="120" height="30" fill="#9b59b6" stroke="#8e44ad" stroke-width="2" rx="5"/>
  <text x="700" y="120" text-anchor="middle" class="label">Idealista.com</text>
  
  <!-- Data Flow Section -->
  <rect x="50" y="180" width="700" height="300" fill="#ffffff" stroke="#bdc3c7" stroke-width="2" rx="10"/>
  <text x="400" y="210" text-anchor="middle" class="subtitle">Data Flow & Processing</text>
  
  <!-- Step 1: Data Extraction -->
  <circle cx="150" cy="280" r="40" fill="#e8f5e8" stroke="#27ae60" stroke-width="3"/>
  <text x="150" y="285" text-anchor="middle" class="label">1. Extract</text>
  <text x="150" y="300" text-anchor="middle" class="label">Property Data</text>
  
  <!-- Step 2: Scoring -->
  <circle cx="300" cy="280" r="40" fill="#fff3cd" stroke="#f39c12" stroke-width="3"/>
  <text x="300" y="285" text-anchor="middle" class="label">2. Calculate</text>
  <text x="300" y="300" text-anchor="middle" class="label">Professional Score</text>
  
  <!-- Step 3: Storage -->
  <circle cx="450" cy="280" r="40" fill="#f8d7da" stroke="#dc3545" stroke-width="3"/>
  <text x="450" y="285" text-anchor="middle" class="label">3. Save to</text>
  <text x="450" y="300" text-anchor="middle" class="label">Local Storage</text>
  
  <!-- Step 4: Display -->
  <circle cx="600" cy="280" r="40" fill="#d1ecf1" stroke="#17a2b8" stroke-width="3"/>
  <text x="600" y="285" text-anchor="middle" class="label">4. Display in</text>
  <text x="600" y="300" text-anchor="middle" class="label">Popup Manager</text>
  
  <!-- Arrows -->
  <path d="M 190 280 L 260 280" class="arrow"/>
  <path d="M 340 280 L 410 280" class="arrow"/>
  <path d="M 490 280 L 560 280" class="arrow"/>
  
  <!-- Data Types -->
  <rect x="80" y="380" width="120" height="60" fill="#f8f9fa" stroke="#dee2e6" stroke-width="2" rx="5"/>
  <text x="140" y="400" text-anchor="middle" class="label">Property Info</text>
  <text x="140" y="415" text-anchor="middle" class="label">• Price, Size</text>
  <text x="140" y="430" text-anchor="middle" class="label">• Rooms, Features</text>
  
  <rect x="240" y="380" width="120" height="60" fill="#f8f9fa" stroke="#dee2e6" stroke-width="2" rx="5"/>
  <text x="300" y="400" text-anchor="middle" class="label">Scored Property</text>
  <text x="300" y="415" text-anchor="middle" class="label">• Score (0-100)</text>
  <text x="300" y="430" text-anchor="middle" class="label">• Ranked List</text>
  
  <rect x="400" y="380" width="120" height="60" fill="#f8f9fa" stroke="#dee2e6" stroke-width="2" rx="5"/>
  <text x="460" y="400" text-anchor="middle" class="label">Stored Data</text>
  <text x="460" y="415" text-anchor="middle" class="label">• Persistent</text>
  <text x="460" y="430" text-anchor="middle" class="label">• Sync Ready</text>
  
  <rect x="560" y="380" width="120" height="60" fill="#f8f9fa" stroke="#dee2e6" stroke-width="2" rx="5"/>
  <text x="620" y="400" text-anchor="middle" class="label">UI Display</text>
  <text x="620" y="415" text-anchor="middle" class="label">• Color Coded</text>
  <text x="620" y="430" text-anchor="middle" class="label">• Interactive</text>
  
  <!-- Flow arrows to data types -->
  <path d="M 150 320 L 140 380" class="flow"/>
  <path d="M 300 320 L 300 380" class="flow"/>
  <path d="M 450 320 L 460 380" class="flow"/>
  <path d="M 600 320 L 620 380" class="flow"/>
  
  <!-- Legend -->
  <rect x="50" y="520" width="700" height="60" fill="#f8f9fa" stroke="#dee2e6" stroke-width="2" rx="5"/>
  <text x="400" y="540" text-anchor="middle" class="subtitle">Component Types</text>
  
  <rect x="80" y="550" width="20" height="15" class="component"/>
  <text x="110" y="562" class="label">Core Scripts</text>
  
  <rect x="200" y="550" width="20" height="15" class="ui"/>
  <text x="230" y="562" class="label">User Interface</text>
  
  <rect x="320" y="550" width="20" height="15" class="data"/>
  <text x="350" y="562" class="label">Data Storage</text>
  
  <rect x="440" y="550" width="20" height="15" fill="#9b59b6" stroke="#8e44ad" stroke-width="2"/>
  <text x="470" y="562" class="label">External Service</text>
</svg>
